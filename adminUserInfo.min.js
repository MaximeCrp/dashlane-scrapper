const FILTERS_TEXT="Active users\nPending invites\nRemoved users",FILTERS_CONTAINER_CLASS="statusFilters--SMNEn98faE",CHECKBOX_CLASS="ui-components-1avyp1d",CHECKBOX_STATE_ATTRIBUTE_KEY="data-state",CHECKBOX_STATE_ATTRIBUTE_VALUE_WHEN_CHECKED="checked",NAVIGATION_CONTAINER_CLASS="container--biH1xFvLjC";function isFiltersOrderStillCorrect(e){return e.innerText===FILTERS_TEXT}function isCheckboxChecked(e){const t=e.getAttribute(CHECKBOX_STATE_ATTRIBUTE_KEY);return CHECKBOX_STATE_ATTRIBUTE_VALUE_WHEN_CHECKED===t}function setupFilters(){const e=document.getElementsByClassName(FILTERS_CONTAINER_CLASS);if(0===e.length)return;const t=e[0];if(!isFiltersOrderStillCorrect(t))return;const n=t.getElementsByClassName(CHECKBOX_CLASS),o=n[0];isCheckboxChecked(o)||o.click();const s=n[1];isCheckboxChecked(s)&&s.click();const c=n[2];isCheckboxChecked(c)&&c.click()}function tryToNavigateToNextPage(){const e=document.getElementsByClassName(NAVIGATION_CONTAINER_CLASS);if(0===e.length)return console.error("Could not locate the navigation buttons."),!1;const t=e[0].getElementsByTagName("button")[1];return t.disabled?(console.log("This was already last page."),!1):(t.click(),console.log("Navigated to next page."),!0)}function getCellsText(e){return e.innerText.split("\t").flatMap((e=>e.split("\n"))).flatMap((e=>""!==e?e:[]))}function scrapCurrentPageUsersInfo(){const[e,...t]=document.getElementsByTagName("tr"),n=t.map(getCellsText);return console.log(`Found info for ${t.length} users on this page.`),n}async function copyUsersToClipboard(){let e=[],t=!0;do{e=e.concat(scrapCurrentPageUsersInfo());t=tryToNavigateToNextPage()}while(t);const n=e.map((e=>e.join("\t"))).join("\n");return await navigator.clipboard.writeText(n),console.log(`Copied info for ${e.length} users`),e.length}function copyDataWhenFocused(){return new Promise(((e,t)=>{const n=async()=>{try{await copyUsersToClipboard(),e()}catch(e){t(e)}window.removeEventListener("focus",n)};window.addEventListener("focus",n),console.info("Click back into Dashlane users page NOW!")}))}setupFilters(),copyDataWhenFocused();
